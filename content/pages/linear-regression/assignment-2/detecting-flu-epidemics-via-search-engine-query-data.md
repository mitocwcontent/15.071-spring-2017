---
content_type: page
parent_title: 2.5 Assignment 2
parent_uid: d3823600-300c-0300-0e79-696e835f8f2f
title: 2.5 Assignment 2
uid: d64b9247-3ae1-fb23-50f1-b27dc8fbde0b
---
<ul class="navigation pagination">     <li id="top_bck_btn"><a href="./resolveuid/f590aa024205ae291d855ec56a16b4a4">&lt;<span>Reading Test Scores</span></a></li>     <li id="flp_btn_1"><a href="./resolveuid/d3823600300c03000e79696e835f8f2f">2.5.1<span>Climate Change</span></a></li>     <li id="flp_btn_2"><a href="./resolveuid/f590aa024205ae291d855ec56a16b4a4">2.5.2<span>Reading Test Scores</span></a></li>     <li id="flp_btn_3" class="button_selected"><a href="./resolveuid/d64b92473ae1fb2350f1b27dc8fbde0b">2.5.3<span>Detecting Flu Epidemics via Search Engine Query Data</span></a></li>     <li id="flp_btn_4"><a href="./resolveuid/609cf3523750f69ecb54c706f04a68c5">2.5.4<span>State Data</span></a></li>     <li id="top_continue_btn"><a href="./resolveuid/609cf3523750f69ecb54c706f04a68c5">&gt;<span>State Data</span></a></li> </ul> <h2 class="subhead">Detecting Flu Epidemics via Search Engine Query Data&nbsp;</h2> <p style="text-rendering: optimizelegibility; outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 16px; font: inherit; vertical-align: baseline; padding: 0px; margin: 0px 0px 1.416em 0px; border: 0px initial initial;">Flu epidemics constitute a major public health concern causing respiratory illnesses, hospitalizations, and deaths. According to the National Vital Statistics Reports published in October 2012, influenza ranked as the eighth leading cause of death in 2011 in the United States. Each year, 250,000 to 500,000 deaths are attributed to influenza related diseases throughout the world.</p> <p style="text-rendering: optimizelegibility; outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 16px; font: inherit; vertical-align: baseline; padding: 0px; margin: 0px 0px 1.416em 0px; border: 0px initial initial;">The U.S. Centers for Disease Control and Prevention (CDC) and the European Influenza Surveillance Scheme (EISS) detect influenza activity through virologic and clinical data, including Influenza-like Illness (ILI) physician visits. Reporting national and regional data, however, are published with a 1-2 week lag.</p> <p style="text-rendering: optimizelegibility; outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 16px; font: inherit; vertical-align: baseline; padding: 0px; margin: 0px 0px 1.416em 0px; border: 0px initial initial;">The <span style="text-decoration: underline;"><a href="https://www.google.org/flutrends/us/#US">Google Flu Trends</a></span> project was initiated to see if faster reporting can be made possible by considering flu-related online search queries -- data that is available almost immediately.</p> <h2 class="subhead">Problem 1.1 - Understanding the Data</h2> <div class="self_assessment"><p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_0">We would like to estimate influenza-like illness (ILI) activity using Google web search logs. Fortunately, one can easily access this data online:</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_1">ILI Data - The <u><a href="http://www.cdc.gov/flu/weekly/fluactivitysurv.htm">CDC</a></u> publishes on its website the official regional and state-level percentage of patient visits to healthcare providers for ILI purposes on a weekly basis.</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_2">&nbsp;</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_3">Google Search Queries - <u><a href="http://www.google.com/trends/">Google Trends</a></u> allows public retrieval of weekly counts for every query searched by users around the world. For each location, the counts are normalized by dividing the count for each query in a particular week by the total number of online search queries submitted in that location during the week. Then, the values are adjusted to be between 0 and 1.</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_4">&nbsp;</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_5">The csv file <u><a href="./resolveuid/0148593d1ffa6dfdc89b468c796b52f3">FluTrain (CSV)</a></u>&nbsp;aggregates this data from January 1, 2004 until December 31, 2011 as follows:</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_6">&quot;Week&quot; - The range of dates represented by this observation, in year/month/day format.</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_7">&quot;ILI&quot; - This column lists the percentage of ILI-related physician visits for the corresponding week.</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_8">&quot;Queries&quot; - This column lists the fraction of queries that are ILI-related for the corresponding week, adjusted to be between 0 and 1 (higher values correspond to more ILI-related search queries).</p> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_9">Before applying analytics tools on the training set, we first need to understand the data at hand. Load &quot;FluTrain.csv&quot; into a data frame called FluTrain. Looking at the time period 2004-2011, which week corresponds to the highest percentage of ILI-related physician visits? Select the day of the month corresponding to the start of this week.</p> <table display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_10">     <tbody>         <tr>             <td><div id="Q1_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 1</legend>             <div class="choice"><label id="Q1_label"><span id="Q1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(1)" id="Q1_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">January</option>             <option correct="false">February</option>             <option correct="false">March</option>             <option correct="false">April</option>             <option correct="false">May</option>             <option correct="false">June</option>             <option correct="false">July</option>             <option correct="false">August</option>             <option correct="false">September</option>             <option correct="true">October</option>             <option correct="false">November</option>             <option correct="false">December</option>             </select><span style="display:none;" id="Q1_ans_span" tabindex="-1" class="answer">  October</span><span id="Q1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>             <td><div id="Q2_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 2</legend>             <div class="choice"><label id="Q2_label"><span id="Q2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(2)" id="Q2_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">1</option>             <option correct="false">2</option>             <option correct="false">3</option>             <option correct="false">4</option>             <option correct="false">5</option>             <option correct="false">6</option>             <option correct="false">7</option>             <option correct="false">8</option>             <option correct="false">9</option>             <option correct="false">10</option>             <option correct="false">11</option>             <option correct="false">12</option>             <option correct="false">13</option>             <option correct="false">14</option>             <option correct="false">15</option>             <option correct="false">16</option>             <option correct="false">17</option>             <option correct="true">18</option>             <option correct="false">19</option>             <option correct="false">20</option>             <option correct="false">21</option>             <option correct="false">22</option>             <option correct="false">23</option>             <option correct="false">24</option>             <option correct="false">25</option>             <option correct="false">26</option>             <option correct="false">27</option>             <option correct="false">28</option>             <option correct="false">29</option>             <option correct="false">30</option>             <option correct="false">31</option>             </select><span style="display:none;" id="Q2_ans_span" tabindex="-1" class="answer">  18</span><span id="Q2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>             <td><div id="Q3_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 3</legend>             <div class="choice"><label id="Q3_label"><span id="Q3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(3)" id="Q3_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">2004</option>             <option correct="false">2005</option>             <option correct="false">2006</option>             <option correct="false">2007</option>             <option correct="false">2008</option>             <option correct="true">2009</option>             <option correct="false">2010</option>             <option correct="false">2011</option>             </select><span style="display:none;" id="Q3_ans_span" tabindex="-1" class="answer">  2009</span><span id="Q3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>         </tr>     </tbody> </table> <div id="S1_div" class="problem_solution" tabindex="-1" display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_11"><div class="detailed-solution"><p>Explanation</p> <p>We can limit FluTrain to the observations that obtain the maximum ILI value with subset(FluTrain, ILI == max(ILI)). From here, we can read information about the week at which the maximum was obtained. Alternatively, you can use which.max(FluTrain$ILI) to find the row number corresponding to the observation with the maximum value of ILI, which is 303. Then, you can output the corresponding week using FluTrain$Week[303].</p></div></div> <p display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_12">Which week corresponds to the highest percentage of ILI-related query fraction?</p> <table display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_13">     <tbody>         <tr>             <td><div id="Q4_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 4</legend>             <div class="choice"><label id="Q4_label"><span id="Q4_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(4)" id="Q4_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">January</option>             <option correct="false">February</option>             <option correct="false">March</option>             <option correct="false">April</option>             <option correct="false">May</option>             <option correct="false">June</option>             <option correct="false">July</option>             <option correct="false">August</option>             <option correct="false">September</option>             <option correct="true">October</option>             <option correct="false">November</option>             <option correct="false">December</option>             </select><span style="display:none;" id="Q4_ans_span" tabindex="-1" class="answer">  October</span><span id="Q4_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>             <td><div id="Q5_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 5</legend>             <div class="choice"><label id="Q5_label"><span id="Q5_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(5)" id="Q5_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">1</option>             <option correct="false">2</option>             <option correct="false">3</option>             <option correct="false">4</option>             <option correct="false">5</option>             <option correct="false">6</option>             <option correct="false">7</option>             <option correct="false">8</option>             <option correct="false">9</option>             <option correct="false">10</option>             <option correct="false">11</option>             <option correct="false">12</option>             <option correct="false">13</option>             <option correct="false">14</option>             <option correct="false">15</option>             <option correct="false">16</option>             <option correct="false">17</option>             <option correct="true">18</option>             <option correct="false">19</option>             <option correct="false">20</option>             <option correct="false">21</option>             <option correct="false">22</option>             <option correct="false">23</option>             <option correct="false">24</option>             <option correct="false">25</option>             <option correct="false">26</option>             <option correct="false">27</option>             <option correct="false">28</option>             <option correct="false">29</option>             <option correct="false">30</option>             <option correct="false">31</option>             </select><span style="display:none;" id="Q5_ans_span" tabindex="-1" class="answer">  18</span><span id="Q5_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>             <td><div id="Q6_div" class="problem_question"><fieldset><legend class="visually-hidden">Exercise 6</legend>             <div class="choice"><label id="Q6_label"><span id="Q6_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><select onchange="numericTypedOrDropDownSelected(6)" id="Q6_select" class="problem_text_input">             <option correct="false"></option>             <option correct="false">2004</option>             <option correct="false">2005</option>             <option correct="false">2006</option>             <option correct="false">2007</option>             <option correct="false">2008</option>             <option correct="true">2009</option>             <option correct="false">2010</option>             <option correct="false">2011</option>             </select><span style="display:none;" id="Q6_ans_span" tabindex="-1" class="answer">  2009</span><span id="Q6_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div>             </fieldset></div></td>         </tr>         <tr>           <td>&nbsp;</td>           <td>&nbsp;</td>           <td><div class="action"><button id="Q1_button" onclick="checkAnswer({1: 'optionresponse', 2: 'optionresponse', 3: 'optionresponse', 4: 'optionresponse', 5: 'optionresponse', 6: 'optionresponse'})" class="problem_mo_button">Check</button><button id="Q1_button_show" onclick="showHideSolution({1: 'optionresponse', 2: 'optionresponse', 3: 'optionresponse', 4: 'optionresponse', 5: 'optionresponse', 6: 'optionresponse'}, 1, [1, 2])" class="problem_mo_button">Show Answer</button></div></td>         </tr>     </tbody> </table> <div id="S2_div" class="problem_solution" tabindex="-1" display_name="Problem 1.1 - Understanding the Data" url_name="Problem_1_1_Understanding_the_Data_14"><div class="detailed-solution"><p>Explanation</p> <p>We can limit FluTrain to the observations that obtain the maximum ILI value with subset(FluTrain, Queries == max(Queries)). From here, we can read information about the week at which the maximum was obtained. Alternatively, you can use which.max(FluTrain$Queries) to find the row number corresponding to the observation with the maximum value of Queries, which is 303. Then, you can output the corresponding week using FluTrain$Week[303].</p></div></div></div> <h2 class="subhead">Problem 1.2 - Understanding the Data</h2> <div class="self_assessment"><div id="Q7_div" class="problem_question"><p display_name="Problem 1.2 - Understanding the Data" url_name="Problem_1_2_Understanding_the_Data_0">Let us now understand the data at an aggregate level. Plot the histogram of the dependent variable, ILI. What best describes the distribution of values of ILI?</p> <fieldset><legend class="visually-hidden">Exercise 7</legend> <div class="choice"><label id="Q7_input_1_label"><span id="Q7_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q7_input_1" onclick="optionSelected(7)" name="Q7_input" class="problem_radio_input" correct="true" /><span class="choice">Most of the ILI values are small, with a relatively small number of much larger values (in statistics, this sort of data is called &quot;skew right&quot;). </span><span id="Q7_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q7_input_2_label"><span id="Q7_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q7_input_2" onclick="optionSelected(7)" name="Q7_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI values are balanced, with equal numbers of unusually large and unusually small values. </span><span id="Q7_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q7_input_3_label"><span id="Q7_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q7_input_3" onclick="optionSelected(7)" name="Q7_input" class="problem_radio_input" correct="false" /><span class="choice">Most of the ILI values are large, with a relatively small number of much smaller values (in statistics, this sort of data is called &quot;skew left&quot;). </span><span id="Q7_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S3_div" class="problem_solution" tabindex="-1" display_name="Problem 1.2 - Understanding the Data" url_name="Problem_1_2_Understanding_the_Data_2"><div class="detailed-solution"><p>Explanation</p> <p>The histogram of ILI can be obtained with hist(FluTrain$ILI). Visually, the data is skew right.</p></div></div> <div class="action"><button id="Q2_button" onclick="checkAnswer({7: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q2_button_show" onclick="showHideSolution({7: 'multiple_choice'}, 2, [3])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 1.3 - Understanding the Data</h2> <div class="self_assessment"><p display_name="Problem 1.3 - Understanding the Data" url_name="Problem_1_3_Understanding_the_Data_0">When handling a skewed dependent variable, it is often useful to predict the logarithm of the dependent variable instead of the dependent variable itself -- this prevents the small number of unusually large or small observations from having an undue influence on the sum of squared errors of predictive models. In this problem, we will predict the natural log of the ILI variable, which can be computed in R using the log() function.</p> <div id="Q8_div" class="problem_question"><p display_name="Problem 1.3 - Understanding the Data" url_name="Problem_1_3_Understanding_the_Data_1">Plot the natural logarithm of ILI versus Queries. What does the plot suggest?.</p> <fieldset><legend class="visually-hidden">Exercise 8</legend> <div class="choice"><label id="Q8_input_1_label"><span id="Q8_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q8_input_1" onclick="optionSelected(8)" name="Q8_input" class="problem_radio_input" correct="false" /><span class="choice">There is a negative, linear relationship between log(ILI) and Queries. </span><span id="Q8_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q8_input_2_label"><span id="Q8_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q8_input_2" onclick="optionSelected(8)" name="Q8_input" class="problem_radio_input" correct="false" /><span class="choice">There is no apparent linear relationship between log(ILI) and Queries. </span><span id="Q8_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q8_input_3_label"><span id="Q8_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q8_input_3" onclick="optionSelected(8)" name="Q8_input" class="problem_radio_input" correct="true" /><span class="choice">There is a positive, linear relationship between log(ILI) and Queries. </span><span id="Q8_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S4_div" class="problem_solution" tabindex="-1" display_name="Problem 1.3 - Understanding the Data" url_name="Problem_1_3_Understanding_the_Data_3"><div class="detailed-solution"><p>Explanation</p> <p>The plot can be obtained with plot(FluTrain$Queries, log(FluTrain$ILI)). Visually, there is a positive, linear relationship between log(ILI) and Queries.</p></div></div> <div class="action"><button id="Q3_button" onclick="checkAnswer({8: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q3_button_show" onclick="showHideSolution({8: 'multiple_choice'}, 3, [4])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 2.1 - Linear Regression Model</h2> <div class="self_assessment"><div id="Q9_div" class="problem_question"><p display_name="Problem 2.1 - Linear Regression Model" url_name="Problem_2_1_Linear_Regression_Model_0">Based on the plot we just made, it seems that a linear regression model could be a good modeling choice. Based on our understanding of the data from the previous subproblem, which model best describes our estimation problem?</p> <fieldset><legend class="visually-hidden">Exercise 9</legend> <div class="choice"><label id="Q9_input_1_label"><span id="Q9_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_1" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">ILI = intercept + coefficient x Queries, where the coefficient is negative</span><span id="Q9_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_2_label"><span id="Q9_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_2" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">Queries = intercept + coefficient x ILI, where the coefficient is negative</span><span id="Q9_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_3_label"><span id="Q9_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_3" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">ILI = intercept + coefficient x Queries, where the coefficient is positive</span><span id="Q9_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_4_label"><span id="Q9_input_4_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_4" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">Queries = intercept + coefficient x ILI, where the coefficient is positive</span><span id="Q9_input_4_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_5_label"><span id="Q9_input_5_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_5" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">log(ILI) = intercept + coefficient x Queries, where the coefficient is negative</span><span id="Q9_input_5_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_6_label"><span id="Q9_input_6_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_6" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">Queries = intercept + coefficient x log(ILI), where the coefficient is negative</span><span id="Q9_input_6_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_7_label"><span id="Q9_input_7_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_7" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="true" /><span class="choice">log(ILI) = intercept + coefficient x Queries, where the coefficient is positive</span><span id="Q9_input_7_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q9_input_8_label"><span id="Q9_input_8_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q9_input_8" onclick="optionSelected(9)" name="Q9_input" class="problem_radio_input" correct="false" /><span class="choice">Queries = intercept + coefficient x log(ILI), where the coeffcient is positive</span><span id="Q9_input_8_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S5_div" class="problem_solution" tabindex="-1" display_name="Problem 2.1 - Linear Regression Model" url_name="Problem_2_1_Linear_Regression_Model_2"><div class="detailed-solution"><p>Explanation</p> <p>From the previous subproblem, we are predicting log(ILI) using the Queries variable. From the plot in the previous subproblem, we expect the coefficient on Queries to be positive.</p></div></div> <div class="action"><button id="Q4_button" onclick="checkAnswer({9: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q4_button_show" onclick="showHideSolution({9: 'multiple_choice'}, 4, [5])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 2.2 - Linear Regression Model</h2> <div class="self_assessment"><p display_name="Problem 2.2 - Linear Regression Model" url_name="Problem_2_2_Linear_Regression_Model_0">Let's call the regression model from the previous problem (Problem 2.1) FluTrend1 and run it in R. Hint: to take the logarithm of a variable Var in a regression equation, you simply use log(Var) when specifying the formula to the lm() function.</p> <div id="Q10_div" class="problem_question"><p display_name="Problem 2.2 - Linear Regression Model" url_name="Problem_2_2_Linear_Regression_Model_1">What is the training set R-squared value for FluTrend1 model (the &quot;Multiple R-squared&quot;)?</p> <fieldset><legend class="visually-hidden">Exercise 10</legend> <div class="choice"><label id="Q10_label"><span id="Q10_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q10_input" value="" onkeypress="numericTypedOrDropDownSelected(10)" class="problem_text_input" /><input type="hidden" id="Q10_ans" value="0.709" /><input type="hidden" id="Q10_tolerance" value="1%" /><span id="Q10_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S10_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S6_div" class="problem_solution" tabindex="-1" display_name="Problem 2.2 - Linear Regression Model" url_name="Problem_2_2_Linear_Regression_Model_3"><div class="detailed-solution"><p>Explanation</p> <p>The model can be trained with:</p> <p>FluTrend1 = lm(log(ILI)~Queries, data=FluTrain)</p> <p>From summary(FluTrend1), we read that the R-squared value is 0.709.</p></div></div> <p display_name="Problem 2.2 - Linear Regression Model" url_name="Problem_2_2_Linear_Regression_Model_4">&nbsp;</p> <div class="action"><button id="Q5_button" onclick="checkAnswer({10: 'numerical'})" class="problem_mo_button">Check</button><button id="Q5_button_show" onclick="showHideSolution({10: 'numerical'}, 5, [6])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 2.3 - Linear Regression Model</h2> <div class="self_assessment"><div id="Q11_div" class="problem_question"><p display_name="Problem 2.3 - Linear Regression Model" url_name="Problem_2_3_Linear_Regression_Model_0">For a single variable linear regression model, there is a direct relationship between the R-squared and the correlation between the independent and the dependent variables. What is the relationship we infer from our problem? (Don't forget that you can use the cor function to compute the correlation between two variables.)</p> <fieldset><legend class="visually-hidden">Exercise 11</legend> <div class="choice"><label id="Q11_input_1_label"><span id="Q11_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q11_input_1" onclick="optionSelected(11)" name="Q11_input" class="problem_radio_input" correct="true" /><span class="choice">R-squared = Correlation^2</span><span id="Q11_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q11_input_2_label"><span id="Q11_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q11_input_2" onclick="optionSelected(11)" name="Q11_input" class="problem_radio_input" correct="false" /><span class="choice">R-squared = log(1/Correlation)</span><span id="Q11_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q11_input_3_label"><span id="Q11_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q11_input_3" onclick="optionSelected(11)" name="Q11_input" class="problem_radio_input" correct="false" /><span class="choice">R-squared = exp(-0.5*Correlation)</span><span id="Q11_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S7_div" class="problem_solution" tabindex="-1" display_name="Problem 2.3 - Linear Regression Model" url_name="Problem_2_3_Linear_Regression_Model_2"><div class="detailed-solution"><p>Explanation</p> <p>To test these hypotheses, we first need to compute the correlation between the independent variable used in the model (Queries) and the dependent variable (log(ILI)). This can be done with</p> <p>Correlation = cor(FluTrain$Queries, log(FluTrain$ILI))</p> <p>The values of the three expressions are then:</p> <p>Correlation^2 = 0.7090201</p> <p>log(1/Correlation) = 0.1719357</p> <p>exp(-0.5*Correlation) = 0.6563792</p> <p>It appears that Correlation^2 is equal to the R-squared value. It can be proved that this is always the case.</p></div></div> <p display_name="Problem 2.3 - Linear Regression Model" url_name="Problem_2_3_Linear_Regression_Model_3">Note that the &quot;exp&quot; function stands for the exponential function. The exponential can be computed in R using the function exp().</p> <div class="action"><button id="Q6_button" onclick="checkAnswer({11: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q6_button_show" onclick="showHideSolution({11: 'multiple_choice'}, 6, [7])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 3.1 - Performance on the Test Set</h2> <div class="self_assessment"><p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_0">The csv file <u><a href="./resolveuid/7dab7b0643fffe3c60340a93323d2a0a">FluTest.csv</a></u> provides the 2012 weekly data of the ILI-related search queries and the observed weekly percentage of ILI-related physician visits. Load this data into a data frame called FluTest.</p> <p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_1">Normally, we would obtain test-set predictions from the model FluTrend1 using the code</p> <p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_2">PredTest1 = predict(FluTrend1, newdata=FluTest)</p> <p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_3">However, the dependent variable in our model is log(ILI), so PredTest1 would contain predictions of the log(ILI) value. We are instead interested in obtaining predictions of the ILI value. We can convert from predictions of log(ILI) to predictions of ILI via exponentiation, or the exp() function. The new code, which predicts the ILI value, is</p> <p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_4">PredTest1 = exp(predict(FluTrend1, newdata=FluTest))</p> <div id="Q12_div" class="problem_question"><p display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_5">What is our estimate for the percentage of ILI-related physician visits for the week of March 11, 2012? (HINT: You can either just output FluTest$Week to find which element corresponds to March 11, 2012, or you can use the &quot;which&quot; function in R. To learn more about the which function, type &quot;?which&quot; in your R console.)</p> <fieldset><legend class="visually-hidden">Exercise 12</legend> <div class="choice"><label id="Q12_label"><span id="Q12_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q12_input" value="" onkeypress="numericTypedOrDropDownSelected(12)" class="problem_text_input" /><input type="hidden" id="Q12_ans" value="2.187383" /><input type="hidden" id="Q12_tolerance" value="1%" /><span id="Q12_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S12_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S8_div" class="problem_solution" tabindex="-1" display_name="Problem 3.1 - Performance on the Test Set" url_name="Problem_3_1_Performance_on_the_Test_Set_7"><div class="detailed-solution"><p>Explanation</p> <p>To obtain the predictions, we need can run</p> <p>PredTest1 = exp(predict(FluTrend1, newdata=FluTest))</p> <p>Next, we need to determine which element in the test set is for March 11, 2012. We can determine this with:</p> <p>which(FluTest$Week == &quot;2012-03-11 - 2012-03-17&quot;)</p> <p>Now we know we are looking for prediction number 11. This can be accessed with:</p> <p>PredTest1[11]</p></div></div> <div class="action"><button id="Q7_button" onclick="checkAnswer({12: 'numerical'})" class="problem_mo_button">Check</button><button id="Q7_button_show" onclick="showHideSolution({12: 'numerical'}, 7, [8])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 3.2 - Performance on the Test Set</h2> <div class="self_assessment"><p display_name="Problem 3.2 - Performance on the Test Set" url_name="Problem_3_2_Performance_on_the_Test_Set_0">What is the relative error betweeen the estimate (our prediction) and the observed value for the week of March 11, 2012? Note that the relative error is calculated as</p> <div id="Q13_div" class="problem_question"><p display_name="Problem 3.2 - Performance on the Test Set" url_name="Problem_3_2_Performance_on_the_Test_Set_1">(Observed ILI - Estimated ILI)/Observed ILI</p> <fieldset><legend class="visually-hidden">Exercise 13</legend> <div class="choice"><label id="Q13_label"><span id="Q13_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q13_input" value="" onkeypress="numericTypedOrDropDownSelected(13)" class="problem_text_input" /><input type="hidden" id="Q13_ans" value=".04624" /><input type="hidden" id="Q13_tolerance" value="0.001" /><span id="Q13_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S13_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S9_div" class="problem_solution" tabindex="-1" display_name="Problem 3.2 - Performance on the Test Set" url_name="Problem_3_2_Performance_on_the_Test_Set_3"><div class="detailed-solution"><p>Explanation</p> <p>From the previous problem, we know the predicted value is 2.187378. The actual value is the 11th testing set ILI value or FluTest$ILI[11], which has value 2.293422. Finally we compute the relative error to be (2.293422 - 2.187378)/2.293422.</p></div></div> <div class="action"><button id="Q8_button" onclick="checkAnswer({13: 'numerical'})" class="problem_mo_button">Check</button><button id="Q8_button_show" onclick="showHideSolution({13: 'numerical'}, 8, [9])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 3.3 - Performance on the Test Set</h2> <div class="self_assessment"><div id="Q14_div" class="problem_question"><p display_name="Problem 3.3 - Performance on the Test Set" url_name="Problem_3_3_Performance_on_the_Test_Set_0">What is the Root Mean Square Error (RMSE) between our estimates and the actual observations for the percentage of ILI-related physician visits, on the test set?</p> <fieldset><legend class="visually-hidden">Exercise 14</legend> <div class="choice"><label id="Q14_label"><span id="Q14_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q14_input" value="" onkeypress="numericTypedOrDropDownSelected(14)" class="problem_text_input" /><input type="hidden" id="Q14_ans" value="0.7490645" /><input type="hidden" id="Q14_tolerance" value="1%" /><span id="Q14_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S14_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S10_div" class="problem_solution" tabindex="-1" display_name="Problem 3.3 - Performance on the Test Set" url_name="Problem_3_3_Performance_on_the_Test_Set_2"><div class="detailed-solution"><p>Explanation</p> <p>The RMSE can be calculated by first computing the SSE:</p> <p>SSE = sum((PredTest1-FluTest$ILI)^2)</p> <p>and then dividing by the number of observations and taking the square root:</p> <p>RMSE = sqrt(SSE / nrow(FluTest))</p> <p>Alternatively, you could use the following command:</p> <p>sqrt(mean((PredTest1-FluTest$ILI)^2)).</p></div></div> <div class="action"><button id="Q9_button" onclick="checkAnswer({14: 'numerical'})" class="problem_mo_button">Check</button><button id="Q9_button_show" onclick="showHideSolution({14: 'numerical'}, 9, [10])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 4.1 - Training a Time Series Model</h2> <div class="self_assessment"><p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_0">The observations in this dataset are consecutive weekly measurements of the dependent and independent variables. This sort of dataset is called a &quot;time series.&quot; Often, statistical models can be improved by predicting the current value of the dependent variable using the value of the dependent variable from earlier weeks. In our models, this means we will predict the ILI variable in the current week using values of the ILI variable from previous weeks.</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_1">First, we need to decide the amount of time to lag the observations. Because the ILI variable is reported with a 1- or 2-week lag, a decision maker cannot rely on the previous week's ILI value to predict the current week's value. Instead, the decision maker will only have data available from 2 or more weeks ago. We will build a variable called ILILag2 that contains the ILI value from 2 weeks before the current observation.</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_2">To do so, we will use the &quot;zoo&quot; package, which provides a number of helpful methods for time series models. While many functions are built into R, you need to add new packages to use some functions. New packages can be installed and loaded easily in R, and we will do this many times in this class. Run the following two commands to install and load the zoo package. In the first command, you will be prompted to select a CRAN mirror to use for your download. Select a mirror near you geographically.</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_3">install.packages(&quot;zoo&quot;)</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_4">library(zoo)</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_5">After installing and loading the zoo package, run the following commands to create the ILILag2 variable in the training set:</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_6">ILILag2 = lag(zoo(FluTrain$ILI), -2, na.pad=TRUE)</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_7">FluTrain$ILILag2 = coredata(ILILag2)</p> <p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_8">In these commands, the value of -2 passed to lag means to return 2 observations before the current one; a positive value would have returned future observations. The parameter na.pad=TRUE means to add missing values for the first two weeks of our dataset, where we can't compute the data from 2 weeks earlier.</p> <div id="Q15_div" class="problem_question"><p display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_9">How many values are missing in the new ILILag2 variable?</p> <fieldset><legend class="visually-hidden">Exercise 15</legend> <div class="choice"><label id="Q15_label"><span id="Q15_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q15_input" value="" onkeypress="numericTypedOrDropDownSelected(15)" class="problem_text_input" /><input type="hidden" id="Q15_ans" value="2" /><input type="hidden" id="Q15_tolerance" value="0" /><span id="Q15_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S15_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S11_div" class="problem_solution" tabindex="-1" display_name="Problem 4.1 - Training a Time Series Model" url_name="Problem_4_1_Training_a_Time_Series_Model_11"><div class="detailed-solution"><p>Explanation</p> <p>This can be read from the output of summary(FluTrain$ILILag2).</p></div></div> <div class="action"><button id="Q10_button" onclick="checkAnswer({15: 'numerical'})" class="problem_mo_button">Check</button><button id="Q10_button_show" onclick="showHideSolution({15: 'numerical'}, 10, [11])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 4.2 - Training a Time Series Model</h2> <div class="self_assessment"><div id="Q16_div" class="problem_question"><p display_name="Problem 4.2 - Training a Time Series Model" url_name="Problem_4_2_Training_a_Time_Series_Model_0">Use the plot() function to plot the log of ILILag2 against the log of ILI. Which best describes the relationship between these two variables?</p> <fieldset><legend class="visually-hidden">Exercise 16</legend> <div class="choice"><label id="Q16_input_1_label"><span id="Q16_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q16_input_1" onclick="optionSelected(16)" name="Q16_input" class="problem_radio_input" correct="false" /><span class="choice">There is a strong negative relationship between log(ILILag2) and log(ILI).</span><span id="Q16_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q16_input_2_label"><span id="Q16_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q16_input_2" onclick="optionSelected(16)" name="Q16_input" class="problem_radio_input" correct="false" /><span class="choice">This is a weak or no relationship between log(ILILag2) and log(ILI)</span><span id="Q16_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q16_input_3_label"><span id="Q16_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q16_input_3" onclick="optionSelected(16)" name="Q16_input" class="problem_radio_input" correct="true" /><span class="choice">There is a strong positive relationship between log(ILILag2) and log(ILI).</span><span id="Q16_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S12_div" class="problem_solution" tabindex="-1" display_name="Problem 4.2 - Training a Time Series Model" url_name="Problem_4_2_Training_a_Time_Series_Model_2"><div class="detailed-solution"><p>Explanation</p> <p>From plot(log(FluTrain$ILILag2), log(FluTrain$ILI)), we observe a strong positive relationship.</p></div></div> <div class="action"><button id="Q11_button" onclick="checkAnswer({16: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q11_button_show" onclick="showHideSolution({16: 'multiple_choice'}, 11, [12])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 4.3 - Training a Time Series Model</h2> <div class="self_assessment"><p display_name="Problem 4.3 - Training a Time Series Model" url_name="Problem_4_3_Training_a_Time_Series_Model_0">Train a linear regression model on the FluTrain dataset to predict the log of the ILI variable using the Queries variable as well as the log of the ILILag2 variable. Call this model FluTrend2.</p> <div id="Q17_div" class="problem_question"><p display_name="Problem 4.3 - Training a Time Series Model" url_name="Problem_4_3_Training_a_Time_Series_Model_1">Which coefficients are significant at the p=0.05 level in this regression model? (Select all that apply.)</p> <fieldset><legend class="visually-hidden">Exercise 17</legend> <div class="choice"><label id="Q17_input_1_label"><span id="Q17_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="checkbox" id="Q17_input_1" onclick="optionSelected(17)" name="Q17_input" class="problem_radio_input" correct="true" /><span class="choice">Intercept</span><span id="Q17_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q17_input_2_label"><span id="Q17_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="checkbox" id="Q17_input_2" onclick="optionSelected(17)" name="Q17_input" class="problem_radio_input" correct="true" /><span class="choice">Queries</span><span id="Q17_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q17_input_3_label"><span id="Q17_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="checkbox" id="Q17_input_3" onclick="optionSelected(17)" name="Q17_input" class="problem_radio_input" correct="true" /><span class="choice">log(ILILag2)</span><span id="Q17_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="Q17_status_combined" tabindex="-1" class="nostatus">&nbsp;</p> </fieldset></div> <div id="Q18_div" class="problem_question"><p display_name="Problem 4.3 - Training a Time Series Model" url_name="Problem_4_3_Training_a_Time_Series_Model_3">What is the R^2 value of the FluTrend2 model?</p> <fieldset><legend class="visually-hidden">Exercise 18</legend> <div class="choice"><label id="Q18_label"><span id="Q18_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q18_input" value="" onkeypress="numericTypedOrDropDownSelected(18)" class="problem_text_input" /><input type="hidden" id="Q18_ans" value="0.9063" /><input type="hidden" id="Q18_tolerance" value="1%" /><span id="Q18_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S18_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S13_div" class="problem_solution" tabindex="-1" display_name="Problem 4.3 - Training a Time Series Model" url_name="Problem_4_3_Training_a_Time_Series_Model_5"><div class="detailed-solution"><p>Explanation</p> <p>The following code builds and summarizes the FluTrend2 model:</p> <p>FluTrend2 = lm(log(ILI)~Queries+log(ILILag2), data=FluTrain)</p> <p>summary(FluTrend2)</p> <p>As can be seen, all three coefficients are highly significant, and the R^2 value is 0.9063.</p></div></div> <div class="action"><button id="Q12_button" onclick="checkAnswer({17: 'choiceresponse', 18: 'numerical'})" class="problem_mo_button">Check</button><button id="Q12_button_show" onclick="showHideSolution({17: 'choiceresponse', 18: 'numerical'}, 12, [13])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 4.4 - Training a Time Series Model</h2> <div class="self_assessment"><div id="Q19_div" class="problem_question"><p display_name="Problem 4.4 - Training a Time Series Model" url_name="Problem_4_4_Training_a_Time_Series_Model_0">On the basis of R-squared value and significance of coefficients, which statement is the most accurate?</p> <fieldset><legend class="visually-hidden">Exercise 19</legend> <div class="choice"><label id="Q19_input_1_label"><span id="Q19_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q19_input_1" onclick="optionSelected(19)" name="Q19_input" class="problem_radio_input" correct="false" /><span class="choice">Due to overfitting, FluTrend2 is a weaker model then FluTrend1 on the training set.</span><span id="Q19_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q19_input_2_label"><span id="Q19_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q19_input_2" onclick="optionSelected(19)" name="Q19_input" class="problem_radio_input" correct="false" /><span class="choice">FluTrend2 is about the same quality as FluTrend1 on the training set.</span><span id="Q19_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q19_input_3_label"><span id="Q19_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q19_input_3" onclick="optionSelected(19)" name="Q19_input" class="problem_radio_input" correct="true" /><span class="choice">FluTrend2 is a stronger model than FluTrend1 on the training set.</span><span id="Q19_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S14_div" class="problem_solution" tabindex="-1" display_name="Problem 4.4 - Training a Time Series Model" url_name="Problem_4_4_Training_a_Time_Series_Model_2"><div class="detailed-solution"><p>Explanation</p> <p>Moving from FluTrend1 to FluTrend2, in-sample R^2 improved from 0.709 to 0.9063, and the new variable is highly significant. As a result, there is no sign of overfitting, and FluTrend2 is superior to FluTrend1 on the training set.</p></div></div> <div class="action"><button id="Q13_button" onclick="checkAnswer({19: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q13_button_show" onclick="showHideSolution({19: 'multiple_choice'}, 13, [14])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 5.1 - Evaluating the Time Series Model in the Test Set</h2> <div class="self_assessment"><p display_name="Problem 5.1 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_1_Evaluating_the_Time_Series_Model_in_the_Test_Set_0">So far, we have only added the ILILag2 variable to the FluTrain data frame. To make predictions with our FluTrend2 model, we will also need to add ILILag2 to the FluTest data frame (note that adding variables before splitting into a training and testing set can prevent this duplication of effort).</p> <div id="Q20_div" class="problem_question"><p display_name="Problem 5.1 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_1_Evaluating_the_Time_Series_Model_in_the_Test_Set_1">Modify the code from the previous subproblem to add an ILILag2 variable to the FluTest data frame. How many missing values are there in this new variable?</p> <fieldset><legend class="visually-hidden">Exercise 20</legend> <div class="choice"><label id="Q20_label"><span id="Q20_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q20_input" value="" onkeypress="numericTypedOrDropDownSelected(20)" class="problem_text_input" /><input type="hidden" id="Q20_ans" value="2" /><input type="hidden" id="Q20_tolerance" value="0" /><span id="Q20_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S20_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S15_div" class="problem_solution" tabindex="-1" display_name="Problem 5.1 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_1_Evaluating_the_Time_Series_Model_in_the_Test_Set_3"><div class="detailed-solution"><p>Explanation</p> <p>We can add the new variable with:</p> <p>ILILag2 = lag(zoo(FluTest$ILI), -2, na.pad=TRUE)</p> <p>FluTest$ILILag2 = coredata(ILILag2)</p> <p>From summary(FluTest$ILILag2), we can see that we're missing two values of the new variable.</p></div></div> <div class="action"><button id="Q14_button" onclick="checkAnswer({20: 'numerical'})" class="problem_mo_button">Check</button><button id="Q14_button_show" onclick="showHideSolution({20: 'numerical'}, 14, [15])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 5.2 - Evaluating the Time Series Model in the Test Set</h2> <div class="self_assessment"><p display_name="Problem 5.2 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_2_Evaluating_the_Time_Series_Model_in_the_Test_Set_0">In this problem, the training and testing sets are split sequentially -- the training set contains all observations from 2004-2011 and the testing set contains all observations from 2012. There is no time gap between the two datasets, meaning the first observation in FluTest was recorded one week after the last observation in FluTrain. From this, we can identify how to fill in the missing values for the ILILag2 variable in FluTest.</p> <div id="Q21_div" class="problem_question"><p display_name="Problem 5.2 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_2_Evaluating_the_Time_Series_Model_in_the_Test_Set_1">Which value should be used to fill in the ILILag2 variable for the first observation in FluTest?</p> <fieldset><legend class="visually-hidden">Exercise 21</legend> <div class="choice"><label id="Q21_input_1_label"><span id="Q21_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q21_input_1" onclick="optionSelected(21)" name="Q21_input" class="problem_radio_input" correct="true" /><span class="choice">The ILI value of the second-to-last observation in the FluTrain data frame.</span><span id="Q21_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q21_input_2_label"><span id="Q21_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q21_input_2" onclick="optionSelected(21)" name="Q21_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the last observation in the FluTrain data frame.</span><span id="Q21_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q21_input_3_label"><span id="Q21_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q21_input_3" onclick="optionSelected(21)" name="Q21_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the first observation in the FluTest data frame.</span><span id="Q21_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q21_input_4_label"><span id="Q21_input_4_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q21_input_4" onclick="optionSelected(21)" name="Q21_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the second observation in the FluTest data frame.</span><span id="Q21_input_4_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S16_div" class="problem_solution" tabindex="-1" display_name="Problem 5.2 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_2_Evaluating_the_Time_Series_Model_in_the_Test_Set_3"><div class="detailed-solution"><p>Explanation</p> <p>The time two weeks before the first week of 2012 is the second-to-last week of 2011. This corresponds to the second-to-last observation in FluTrain.</p></div></div> <div id="Q22_div" class="problem_question"><p display_name="Problem 5.2 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_2_Evaluating_the_Time_Series_Model_in_the_Test_Set_4">Which value should be used to fill in the ILILag2 variable for the second observation in FluTest?</p> <fieldset><legend class="visually-hidden">Exercise 22</legend> <div class="choice"><label id="Q22_input_1_label"><span id="Q22_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q22_input_1" onclick="optionSelected(22)" name="Q22_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the second-to-last observation in the FluTrain data frame.</span><span id="Q22_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q22_input_2_label"><span id="Q22_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q22_input_2" onclick="optionSelected(22)" name="Q22_input" class="problem_radio_input" correct="true" /><span class="choice">The ILI value of the last observation in the FluTrain data frame.</span><span id="Q22_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q22_input_3_label"><span id="Q22_input_3_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q22_input_3" onclick="optionSelected(22)" name="Q22_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the first observation in the FluTest data frame.</span><span id="Q22_input_3_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q22_input_4_label"><span id="Q22_input_4_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q22_input_4" onclick="optionSelected(22)" name="Q22_input" class="problem_radio_input" correct="false" /><span class="choice">The ILI value of the second observation in the FluTest data frame.</span><span id="Q22_input_4_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S17_div" class="problem_solution" tabindex="-1" display_name="Problem 5.2 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_2_Evaluating_the_Time_Series_Model_in_the_Test_Set_6"><div class="detailed-solution"><p>Explanation</p> <p>The time two weeks before the second week of 2012 is the last week of 2011. This corresponds to the last observation in FluTrain.</p></div></div> <div class="action"><button id="Q15_button" onclick="checkAnswer({21: 'multiple_choice', 22: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q15_button_show" onclick="showHideSolution({21: 'multiple_choice', 22: 'multiple_choice'}, 15, [16, 17])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 5.3 - Evaluating the Time Series Model in the Test Set</h2> <div class="self_assessment"><p display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_0">Fill in the missing values for ILILag2 in FluTest. In terms of syntax, you could set the value of ILILag2 in row &quot;x&quot; of the FluTest data frame to the value of ILI in row &quot;y&quot; of the FluTrain data frame with &quot;FluTest$ILILag2[x] = FluTrain$ILI[y]&quot;. Use the answer to the previous questions to determine the appropriate values of &quot;x&quot; and &quot;y&quot;. It may be helpful to check the total number of rows in FluTrain using str(FluTrain) or nrow(FluTrain).</p> <div id="S18_div" class="problem_solution" tabindex="-1" display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_1"><div class="detailed-solution"><p>Explanation</p> <p>From nrow(FluTrain), we see that there are 417 observations in the training set. Therefore, we need to run the following two commands:</p> <p>FluTest$ILILag2[1] = FluTrain$ILI[416]</p> <p>FluTest$ILILag2[2] = FluTrain$ILI[417]</p></div></div> <div id="Q23_div" class="problem_question"><p display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_2">What is the new value of the ILILag2 variable in the first row of FluTest?</p> <fieldset><legend class="visually-hidden">Exercise 23</legend> <div class="choice"><label id="Q23_label"><span id="Q23_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q23_input" value="" onkeypress="numericTypedOrDropDownSelected(23)" class="problem_text_input" /><input type="hidden" id="Q23_ans" value="1.852736" /><input type="hidden" id="Q23_tolerance" value="1%" /><span id="Q23_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S23_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S19_div" class="problem_solution" tabindex="-1" display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_4"><div class="detailed-solution"><p>Explanation</p> <p>This can be read from FluTest$ILILag2[1].</p></div></div> <div id="Q24_div" class="problem_question"><p display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_5">What is the new value of the ILILag2 variable in the second row of FluTest?</p> <fieldset><legend class="visually-hidden">Exercise 24</legend> <div class="choice"><label id="Q24_label"><span id="Q24_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q24_input" value="" onkeypress="numericTypedOrDropDownSelected(24)" class="problem_text_input" /><input type="hidden" id="Q24_ans" value="2.12413" /><input type="hidden" id="Q24_tolerance" value="1%" /><span id="Q24_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S24_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S20_div" class="problem_solution" tabindex="-1" display_name="Problem 5.3 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_3_Evaluating_the_Time_Series_Model_in_the_Test_Set_7"><div class="detailed-solution"><p>Explanation</p> <p>This can be read from FluTest$ILILag2[2].</p></div></div> <div class="action"><button id="Q16_button" onclick="checkAnswer({24: 'numerical', 23: 'numerical'})" class="problem_mo_button">Check</button><button id="Q16_button_show" onclick="showHideSolution({24: 'numerical', 23: 'numerical'}, 16, [18, 19, 20])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 5.4 - Evaluating the Time Series Model in the Test Set</h2> <div class="self_assessment"><p display_name="Problem 5.4 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_4_Evaluating_the_Time_Series_Model_in_the_Test_Set_0">Obtain test set predictions of the ILI variable from the FluTrend2 model, again remembering to call the exp() function on the result of the predict() function to obtain predictions for ILI instead of log(ILI).</p> <div id="Q25_div" class="problem_question"><p display_name="Problem 5.4 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_4_Evaluating_the_Time_Series_Model_in_the_Test_Set_1">What is the test-set RMSE of the FluTrend2 model?</p> <fieldset><legend class="visually-hidden">Exercise 25</legend> <div class="choice"><label id="Q25_label"><span id="Q25_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><span class="visually-hidden">Numerical Response</span><input type="text" id="Q25_input" value="" onkeypress="numericTypedOrDropDownSelected(25)" class="problem_text_input" /><input type="hidden" id="Q25_ans" value="0.294" /><input type="hidden" id="Q25_tolerance" value="0.006" /><span id="Q25_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <p id="S25_ans" tabindex="-1" class="problem_answer">&nbsp;</p> </fieldset></div> <div id="S21_div" class="problem_solution" tabindex="-1" display_name="Problem 5.4 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_4_Evaluating_the_Time_Series_Model_in_the_Test_Set_3"><div class="detailed-solution"><p>Explanation</p> <p>We can obtain the test-set predictions with:</p> <p>PredTest2 = exp(predict(FluTrend2, newdata=FluTest))</p> <p>And then we can compute the RMSE with the following commands:</p> <p>SSE = sum((PredTest2-FluTest$ILI)^2)</p> <p>RMSE = sqrt(SSE / nrow(FluTest))</p> <p>Alternatively, you could use the following command to compute the RMSE:</p> <p>sqrt(mean((PredTest2-FluTest$ILI)^2)).</p> <p>The test-set RMSE of FluTrend2 is 0.294.</p></div></div> <div class="action"><button id="Q17_button" onclick="checkAnswer({25: 'numerical'})" class="problem_mo_button">Check</button><button id="Q17_button_show" onclick="showHideSolution({25: 'numerical'}, 17, [21])" class="problem_mo_button">Show Answer</button></div></div> <h2 class="subhead">Problem 5.5 - Evaluating the Time Series Model in the Test Set</h2> <div class="self_assessment"><div id="Q26_div" class="problem_question"><p display_name="Problem 5.5 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_5_Evaluating_the_Time_Series_Model_in_the_Test_Set_0">Which model obtained the best test-set RMSE?</p> <fieldset><legend class="visually-hidden">Exercise 26</legend> <div class="choice"><label id="Q26_input_1_label"><span id="Q26_input_1_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q26_input_1" onclick="optionSelected(26)" name="Q26_input" class="problem_radio_input" correct="false" /><span class="choice">FluTrend1</span><span id="Q26_input_1_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> <div class="choice"><label id="Q26_input_2_label"><span id="Q26_input_2_aria_status" tabindex="-1" class="visually-hidden">&amp;nbsp;</span><input type="radio" id="Q26_input_2" onclick="optionSelected(26)" name="Q26_input" class="problem_radio_input" correct="true" /><span class="choice">FluTrend2</span><span id="Q26_input_2_normal_status" class="nostatus" aria-hidden="true">&amp;nbsp;</span></label></div> </fieldset></div> <div id="S22_div" class="problem_solution" tabindex="-1" display_name="Problem 5.5 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_5_Evaluating_the_Time_Series_Model_in_the_Test_Set_2"><div class="detailed-solution"><p>Explanation</p> <p>The test-set RMSE of FluTrend2 is 0.294, as opposed to the 0.749 value obtained by the FluTrend1 model.</p></div></div> <p display_name="Problem 5.5 - Evaluating the Time Series Model in the Test Set" url_name="Problem_5_5_Evaluating_the_Time_Series_Model_in_the_Test_Set_3">In this problem, we used a simple time series model with a single lag term. ARIMA models are a more general form of the model we built, which can include multiple lag terms as well as more complicated combinations of previous values of the dependent variable. If you're interested in learning more, check out &quot;?arima&quot; or the available online tutorials for these sorts of models.</p> <div class="action"><button id="Q18_button" onclick="checkAnswer({26: 'multiple_choice'})" class="problem_mo_button">Check</button><button id="Q18_button_show" onclick="showHideSolution({26: 'multiple_choice'}, 18, [22])" class="problem_mo_button">Show Answer</button></div></div> <ul class="navigation progress">     <li id="bck_btn"><a href="./resolveuid/f590aa024205ae291d855ec56a16b4a4">Back<span>Reading Test Scores</span></a></li>     <li id="continue_btn"><a href="./resolveuid/609cf3523750f69ecb54c706f04a68c5">Continue<span>State Data</span></a></li> </ul><p>&nbsp;</p>